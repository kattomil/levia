{"version":3,"sources":["../src/methods/jikan/search.ts"],"names":[],"mappings":";;AAAA,6BAAgC;AAChC,uCAAiC;AAiBjC,+BAA0B;AAqB1B;IAEE;QACE,IAAI,CAAC,OAAO,GAAM,kBAAO,YAAS,CAAC;IACrC,CAAC;IACO,yBAAQ,GAAhB,UAAiB,GAAW;QAC1B,OAAO,eAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACxB,CAAC;IACD,uBAAM,GAAN,UAAO,IAAY,EAAE,MAAgC;QACnD,IAAI,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;aAC9B,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,EAAjB,CAAiB,CAAC;aAC9B,GAAG,CAAC,UAAA,CAAC,IAAI,OAAG,CAAC,SAAI,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAG,EAAvC,CAAuC,CAAC;aACjD,IAAI,CAAC,GAAG,CAAC,CAAC;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC,aAAO,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;IACrE,CAAC;IACD,sBAAK,GAAL,UAAM,MAAgC;QACpC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACtC,CAAC;IACD,sBAAK,GAAL,UAAM,MAAgC;QACpC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACtC,CAAC;IACD,uBAAM,GAAN,UAAO,MAAgC;QACrC,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;IACvC,CAAC;IACD,0BAAS,GAAT,UAAU,MAAgC;QACxC,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;IAC1C,CAAC;IACH,aAAC;AAAD,CA3BA,AA2BC,IAAA;AAED;IACE,OAAO,IAAI,MAAM,EAAE,CAAC;AACtB,CAAC;AAFD,4BAEC","file":"search.js","sourcesContent":["import { joinUrl } from \"./url\";\nimport baseUrl from \"./jikanApi\";\n\nimport AnimeGenre from \"./types/animeGenre\";\nimport MangaGenre from \"./types/mangaGenre\";\n\nimport AnimeType from \"./types/animeType\";\nimport MangaType from \"./types/mangaType\";\n\nimport AnimeStatus from \"./types/animeStatus\";\nimport MangaStatus from \"./types/mangaStatus\";\n\nimport AnimeOrderBy from \"./types/animeOrderBy\";\nimport MangaOrderBy from \"./types/mangaOrderBy\";\n\nimport Sort from \"./types/sort\";\nimport Rating from \"./types/rating\";\n\nimport axios from \"axios\";\n\ninterface AdvancedSearchParameters {\n  q?: string;\n  page?: number;\n  type?: AnimeType | MangaType;\n  status?: AnimeStatus | MangaStatus;\n  rated?: Rating;\n  genre?: AnimeGenre | MangaGenre;\n  score?: number;\n  start_date?: string;\n  end_date?: string;\n  genre_exclude?: 0 | 1;\n  limit?: number;\n  order_by?: AnimeOrderBy | MangaOrderBy;\n  sort?: Sort;\n  producer?: number;\n  magazine?: number;\n  letter?: string;\n}\n\nclass Search {\n  private baseUrl: string;\n  constructor() {\n    this.baseUrl = `${baseUrl}/search`;\n  }\n  private jikanGet(url: string) {\n    return axios.get(url);\n  }\n  search(type: string, params: AdvancedSearchParameters) {\n    let qparams = Object.keys(params)\n      .filter(k => params[k] != null)\n      .map(k => `${k}=${encodeURIComponent(params[k])}`)\n      .join(\"&\");\n    return this.jikanGet(joinUrl(this.baseUrl, [type, \"?\" + qparams]));\n  }\n  anime(params: AdvancedSearchParameters) {\n    return this.search(\"anime\", params);\n  }\n  manga(params: AdvancedSearchParameters) {\n    return this.search(\"manga\", params);\n  }\n  person(params: AdvancedSearchParameters) {\n    return this.search(\"person\", params);\n  }\n  character(params: AdvancedSearchParameters) {\n    return this.search(\"character\", params);\n  }\n}\n\nexport default function(): Search {\n  return new Search();\n}\n"],"sourceRoot":"../../../src"}