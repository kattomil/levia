{"version":3,"sources":["../src/methods/jikan/user.ts"],"names":[],"mappings":"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","file":"user.js","sourcesContent":["import { joinUrl } from \"./url\";\nimport baseUrl from \"./jikanApi\";\n\nimport axios from \"axios\";\n\nclass User {\n  private baseUrl: string;\n  constructor(username: string) {\n    this.baseUrl = `${baseUrl}/user/${username}`;\n  }\n  private jikanGet(url: string): Promise<any> {\n    return axios.get(url);\n  }\n  profile() {\n    return this.jikanGet(joinUrl(this.baseUrl, [\"profile\"]));\n  }\n  history() {\n    return new UserHistory(this);\n  }\n  friends(p?: number) {\n    let params: string[] = [\"friends\"];\n    if (p != null) params.push(String(p));\n    return this.jikanGet(joinUrl(this.baseUrl, params));\n  }\n  animelist(p?: number) {\n    return new UserAnimelist(this, p);\n  }\n  mangalist(p?: number) {\n    return new UserMangalist(this, p);\n  }\n}\n\nclass UserHistory {\n  private parent: User;\n  constructor(parent: User) {\n    this.parent = parent;\n  }\n  all() {\n    // @ts-ignore\n    const url = joinUrl(this.parent.baseUrl, [\"history\"]);\n    // @ts-ignore\n    return this.parent.jikanGet(url);\n  }\n  anime() {\n    // @ts-ignore\n    const url = joinUrl(this.parent.baseUrl, [\"history\", \"anime\"]);\n    // @ts-ignore\n    return this.parent.jikanGet(url);\n  }\n  manga() {\n    // @ts-ignore\n    const url = joinUrl(this.parent.baseUrl, [\"history\", \"manga\"]);\n    // @ts-ignore\n    return this.parent.jikanGet(url);\n  }\n}\n\nclass UserAnimelist {\n  private parent: User;\n  private page: string;\n  constructor(parent: User, p?: number) {\n    this.parent = parent;\n\n    if (p != null) this.page = String(p);\n    else this.page = \"1\";\n  }\n  private getList(params: string[], qparams?: Object) {\n    if (qparams != null) {\n      let qparams = Object.keys(params)\n        .filter(k => params[k] != null)\n        .map(k => `${k}=${encodeURIComponent(params[k])}`)\n        .join(\"&\");\n      params.push(qparams);\n    }\n    // @ts-ignore\n    const url = joinUrl(this.parent.baseUrl, params);\n    // @ts-ignore\n    return this.parent.jikanGet(url);\n  }\n  all(qparams?: Object) {\n    return this.getList([\"animelist\", \"all\", this.page], qparams);\n  }\n  watching(qparams?: Object) {\n    return this.getList([\"animelist\", \"watching\", this.page], qparams);\n  }\n  onhold(qparams?: Object) {\n    return this.getList([\"animelist\", \"onhold\", this.page], qparams);\n  }\n  dropped(qparams?: Object) {\n    return this.getList([\"animelist\", \"dropped\", this.page], qparams);\n  }\n  plantowatch(qparams?: Object) {\n    return this.getList([\"animelist\", \"plantowatch\", this.page], qparams);\n  }\n}\n\nclass UserMangalist {\n  private parent: User;\n  private page: string;\n  constructor(parent: User, p?: number) {\n    this.parent = parent;\n\n    if (p != null) this.page = String(p);\n    else this.page = \"1\";\n  }\n  private getList(params: string[], qparams?: Object) {\n    if (qparams != null) {\n      let qparams = Object.keys(params)\n        .filter(k => params[k] != null)\n        .map(k => `${k}=${encodeURIComponent(params[k])}`)\n        .join(\"&\");\n      params.push(qparams);\n    }\n    // @ts-ignore\n    const url = joinUrl(this.parent.baseUrl, params);\n    // @ts-ignore\n    return this.parent.jikanGet(url);\n  }\n  all(qparams?: Object) {\n    return this.getList([\"mangalist\", \"all\", this.page], qparams);\n  }\n  reading(qparams?: Object) {\n    return this.getList([\"mangalist\", \"reading\", this.page], qparams);\n  }\n  onhold(qparams?: Object) {\n    return this.getList([\"mangalist\", \"onhold\", this.page], qparams);\n  }\n  dropped(qparams?: Object) {\n    return this.getList([\"mangalist\", \"dropped\", this.page], qparams);\n  }\n  plantoread(qparams?: Object) {\n    return this.getList([\"mangalist\", \"plantoread\", this.page], qparams);\n  }\n}\n\nexport default function(username: string): User {\n  return new User(username);\n}\n"],"sourceRoot":"../../../src"}